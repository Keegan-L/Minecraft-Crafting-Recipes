{% extends "base.html" %}

{% block content %}
    <div class="welcome-text">
        <h1 style="font-size: 2.5em; color: white;">Welcome to Minecraft Crafting Guide</h1>
    </div>

    <div class="progress-counter">
        <span id="progressText">Progress: </span>
        <span id="visitedCount">0</span>/32 items visited
    </div>

    <div class="card-grid">
        <div class="card clickable-card" onclick="window.location.href='/category/basics'">
            <h2>Basic Items</h2>
            <p class="card-description">Learn how to craft essential items like sticks, planks, and torches that form the foundation of your Minecraft journey.</p>
        </div>

        <div class="card clickable-card" onclick="window.location.href='/category/tools'">
            <h2>Tools</h2>
            <p class="card-description">Discover the tools you'll need to gather resources and build your world, from wooden pickaxes to diamond shovels.</p>
        </div>

        <div class="card clickable-card" onclick="window.location.href='/category/defense'">
            <h2>Defense</h2>
            <p class="card-description">Master the art of crafting armor and weapons to protect yourself from the dangers of the Minecraft world.</p>
        </div>
    </div>

    <div class="card" style="text-align: center; margin-top: 30px;">
        <h2>Ready for a Challenge?</h2>
        <p>Take the quiz to test your knowledge!</p>
        <button id="quizButton" onclick="window.location.href='/quiz'" disabled>Take Quiz</button>
        <p class="quiz-message">You can only take the quiz after visiting all 32 items.</p>
    </div>

    <script>
        function updateProgress() {
            fetch('/progress')
                .then(response => response.json())
                .then(data => {
                    const quizButton = document.getElementById('quizButton');
                    const visitedCount = document.getElementById('visitedCount');
                    const progressText = document.getElementById('progressText');
                    
                    visitedCount.textContent = data.visited;
                    quizButton.disabled = data.visited < data.total;
                    
                    if (data.visited === data.total) {
                        progressText.textContent = "Ready for Quiz! ";
                    } else {
                        progressText.textContent = "Progress: ";
                    }
                });
        }

        // Update progress every 2 seconds
        setInterval(updateProgress, 2000);
        updateProgress(); // Initial update
    </script>
{% endblock %} 